<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>恢复文件</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <script src="../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Section that covers Source Control reverting files" />
  <meta name="rh-index-keywords" content="Source Control - Reverting Files" />
  <meta name="search-keywords" content="revert files" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>恢复文件</h1>
  <p>在前面的章节中，你已经看到了如何<a href="Repository_Options.htm">创建一个版本库</a>并<a href="Standard_Workflow.htm">提交东西</a>，但如果你犯了一个错误，想 &quot;回滚 &quot;到之前的提交，会发生什么？让我们做一个故意的错误，看看如何处理它...</p>
  <p>首先创建一个新的资源--在这个例子中，我们将创建一个<span class="notranslate">Script</span> 资源--最初你会看到没有状态图标，因为就<span class="notranslate">source control</span> 而言，它还不存在。在<span class="notranslate">script</span> 资源中添加一行简单的代码，比如。</p>
  <p class="code">show_debug_message(&quot;Hello World&quot;);</p>
  <p>如果你现在关闭代码编辑器，<span class="notranslate">script</span> ，修改后的文件图标<img> ，会出现在<a href="../../Introduction/The_Asset_Browser.htm">资产浏览器</a>的旁边。现在，打开<strong>提交 </strong>窗口，你会看到有四个阶段性的变化，因为新的资源会自动被添加。</p>
  <p><img>分阶段的变化将是。</p>
  <ul class="colour">
    <li> <span class="inline">.yyp</span> 项目文件</li>
    <li>一个视图文件</li>
    <li> <span class="notranslate">GML</span> <span class="notranslate">script</span> 本身</li>
    <li>参考它的 <span class="inline">.yy</span> 文件</li>
  </ul>
  <p>你应该输入一个提交信息，然后点击<strong>提交 </strong>按钮，就像我们之前解释的那样。现在，我们回到我们的<span class="notranslate">script</span> ，把这行代码改为（例如）。</p>
  <p class="code">show_debug_message(&quot;Hello World, how are you?&quot;);</p>
  <p>当我们关闭代码编辑器时，<span class="notranslate">script</span> 旁边又会出现一个红色的图标<img> ，但我们已经意识到我们的代码犯了一个错误，我们想回滚到以前的版本来修复它（显然，你可以直接打开<span class="notranslate">script</span> ，然后轻松地修复它，因为这个例子非常简单，但在大型项目中，这通常不是一个可行的办法）。我们需要做的是<strong>回滚 </strong>我们的修改。</p>
  <p>要恢复一个改动，我们首先需要再次打开提交窗口，所以我们再一次进入<strong>源代码控制</strong>&gt;<strong>提交改动</strong>。我们修改过的文件将再次被暂存，准备提交，但这不是我们想要的，所以我们点击<strong>Unstage All</strong>按钮，把它从暂存区取出。</p>
  <p>如果我们现在右击 <strong><img></strong>我们就会得到一个上下文菜单，其中有一个选项是<strong>恢复路径</strong>。</p>
  <p><img>当你选择这个选项时，你将把文件恢复到它们以前的状态。</p>
  <p class="note"><strong>重要的是!</strong>当你恢复时，你会收到一条信息，要求你重新加载或保存当前项目，因为文件检查器检测到磁盘上的变化：<br>
    <img>你必须点击重新加载而不是保存，因为保存会保存内存中的东西，而不是重新加载恢复的文件。
  </p>
  <p>当你编辑了一些东西，想在没有提交的情况下进行修改时，这一切都很好，但当你已经提交了一个或多个修改，想回滚到<em>之前的 </em>提交时，怎么办？好吧，让我们再次编辑我们的<span class="notranslate">script</span> ，说。</p>
  <p class="code">show_debug_message(&quot;This is a bad idea&quot;);</p>
  <p>现在我们像以前一样提交它，让它在<span class="notranslate">source control</span> 。所以，这是个坏主意，我们想回滚，这意味着首先我们需要打开<strong>源代码控制</strong>&gt;<strong>查看历史</strong>窗口。在这里，我们会看到现在这个窗口中所有之前的提交列表，从最初的提交开始，为<span class="notranslate">script</span> ，然后是我们作为 &quot;坏主意 &quot;编辑的<span class="notranslate">script</span> 的提交。</p>
  <p><img>我们现在有两个选择。我们可以恢复整个修订版--这将把所有被修改的文件恢复到所选提交的文件上--或者我们可以选择恢复一个<span class="notranslate">path</span> ，这将简单地恢复一个文件。让我们先做第一个选择。</p>
  <ul class="colour">
    <li>右键点击 <strong><img></strong>我们在<strong>提交历史</strong>窗格中的第二次提交（即 &quot;Hello World &quot;提交）。</li>
    <li>选择<strong>恢复到这个修订版</strong>，然后在警告信息上选择<strong>重新加载</strong>。</li>
  </ul>
  <p>你应该看到<span class="notranslate">script</span> ，现在有一个红色的状态图标<img> ，如果我们把它打开，我们会有以下内容。</p>
  <p><img>，然后我们就可以在项目上做一个提交，这样我们就又回到了原来的位置。但是我们也可以通过以下方式撤销对文件的操作，重新获得我们的 &quot;坏主意 &quot;提交。</p>
  <ul class="colour">
    <li>打开 "<strong>提交更改</strong>"窗口。</li>
    <li>将含有 &quot;Hello World &quot;代码的<span class="notranslate">script</span> 。</li>
    <li>右键点击 <strong><img></strong>并<strong>还原路径</strong>。</li>
  </ul>
  <p>现在，我们又回到了项目中的错误文件！我们可以利用这个机会，只恢复那个文件，而不是把所有文件都恢复到以前的版本。好吧，我们可以利用这个机会，只恢复那个文件<span class="notranslate">path</span> ，而不是把所有东西都恢复到以前的版本。为此，我们需要做以下工作。</p>
  <ul class="colour">
    <li>打开 "<strong>查看历史</strong>"窗口。</li>
    <li>点击第二个提交（&quot;Hello World &quot;的提交）。</li>
    <li>右键点击 <strong><img></strong>在文件窗格中点击我们的<span class="notranslate">script</span> <span class="notranslate">GML</span> ，并选择<strong>恢复路径</strong>。</li>
  </ul>
  <p>我们应该回到我们的 &quot;Hello World &quot;代码，然后我们可以做一个新的提交，用修正后的文件再次更新<span class="notranslate">source control</span> 。</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">返回。<a href="../Source_Control.htm">源头控制</a></div>
        <div style="float:right">下一步。<a href="Cloning_A_Repository.htm">克隆一个存储库</a> </div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span> 2021 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Source Control Reverting Files
reverting files
-->
  <!-- TAGS
source_control_revert
-->
</body>
</html>
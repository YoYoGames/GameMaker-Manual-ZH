<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>来源实例</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css" />
  <script src="../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Gurpreet S. Matharoo" />
  <meta name="topic-comment" content="Page containing extended examples for extensions" />
  <meta name="rh-index-keywords" content="Source Extension Examples" />
  <meta name="search-keywords" content="source android ios extensions native" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>来源实例</h1>
  <p>本页包含<span class="notranslate">extension</span> 源代码的例子和信息，用于<span class="notranslate">Android</span> 和<span class="notranslate">iOS</span> ，以帮助你为这些平台创建自己的本地<span class="notranslate">extensions</span> 。</p>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down" href="#">安卓系统（基本范例）</a></p>
  <div class="droptext" data-targetname="drop-down">
    <p>我们为<span class="notranslate">extension</span> 的例子<span class="notranslate">Android</span> ，将包含做以下事情的函数。</p>
    <ul class="dropspotlist">
      <li>返回两个数字相加的结果</li>
      <li>返回一个由输入<span class="notranslate">string</span> 和值组成的<span class="notranslate">string</span> </li>
      <li>返回一个由两个输入字符串组成的<span class="notranslate">string</span> </li>
      <li>触发<a href="../Object_Properties/Async_Events/Social.htm">Async - Social</a>事件，并在其 <span class="inline">async_load</span> 地图中填充数值</li>
    </ul>
    <p>这个<span class="notranslate">extension</span> ，将利用一个 <span class="inline">.java</span> 文件，其内容如下（点击打开）。</p>
    <p class="note"><a data-height="800" data-rhwidget="HyperlinkPopover" data-width="1000" href="Source_Files/GenericTest.htm">GenericTest.java</a></p>
    <p>要把这样的文件添加到你的<span class="notranslate">extension</span> ，你需要在它的<a href="Android_Extensions.htm">Android属性</a>下，首先输入一个类名（在这个例子中是 &quot;GenericTest&quot;），然后点击 &quot;添加源代码 &quot;并选择 <span class="inline">.java</span> 文件。这将把选定的文件添加到你的项目目录中--你可以右击你的<span class="notranslate">extension</span> ，选择 &quot;在资源管理器中打开&quot;，并在那里看到源文件。</p>
    <p>现在你可以在你的<span class="notranslate">extension</span> ，添加一个新的占位符文件，并在其中创建具有以下属性的函数。</p>
    <ul class="dropspotlist">
      <li><em>函数/外部名称。</em><span><span> </span></span><span class="inline">AddTwoNumbers</span><br />
        <em>帮助。</em><span><span> </span></span><span class="inline">AddTwoNumbers(value1, value2)</span><br />
        <em>参数。</em><span><span> </span></span><span class="inline">double, </span><span class="inline">double</span><br />
        <em>返回类型。</em><span><span> </span></span><span class="inline">double</span>
      </li>
      <li><em>函数/外部名称。</em><span> </span><span class="inline">HowManyObjects</span><br />
        <em>帮助。</em><span><span> </span></span><span class="inline">HowManyObjects(value1, value2, string)</span><br />
        <em>参数。</em><span><span> </span></span><span class="inline">double, </span><span class="inline">double, </span><span class="inline">string</span><br />
        <em>返回类型。</em><span><span> </span></span><span class="inline">string</span>
      </li>
      <li><em>函数/外部名称。</em><span><span> </span></span><span class="inline">BuildAString</span><br />
        <em>帮助。</em><span><span> </span></span><span class="inline">BuildAString(string1, string2)</span><br />
        <em>参数。</em><span><span> </span></span><span class="inline">string, </span><span class="inline">string</span><br />
        <em>返回类型。</em><span><span> </span></span><span class="inline">string</span>
      </li>
      <li><em>函数/外部名称。</em><span><span> </span></span><span class="inline">ReturnAsync</span><br />
        <em>帮助。</em><span><span> </span></span><span class="inline">ReturnAsync(value1, value2)</span><br />
        <em>参数。</em><span><span> </span></span><span class="inline">double,</span><span> </span><span class="inline">double</span><br />
        <em>返回类型。</em><span><span> </span></span><span class="inline">double</span>
      </li>
    </ul>
    <p>下面是一个关于 <span class="inline">AddTwoNumbers()</span> 功能的例子。</p>
    <p><img>你现在可以从你的游戏代码中调用这些函数，像其他内置函数一样使用它们。</p>
    <p class="code">var result1 = string(AddTwoNumbers(irandom(100), 50));<br />
      var result2 = BuildAString(&quot;Hello&quot;, &quot;World&quot;);<br />
      var result3 = HowManyObjects(irandom(1000), irandom(1000), &quot;Targets&quot;);<br />
      ReturnAsync(irandom(1000), irandom(1000));</p>
    <p> <span class="inline">ReturnAsync()</span> 函数将触发<a href="../Object_Properties/Async_Events/Social.htm">Async - Social</a>事件，所以你需要将该事件添加到你的<span class="notranslate">object</span> ，并从其 <span class="inline">async_load</span> 地图中读取数据（该地图由上面给出的扩展的源代码填充）。</p>
    <p class="code">var type = async_load[? &quot;type&quot;];<br />
      <br />
      if (type == &quot;finished&quot;)<br />
      {<br />
          var result4 = &quot;value1: &quot; + string(async_load[? &quot;argument0&quot;]) + &quot;, &quot;;<br />
          result4 += &quot;value2: &quot; + string(async_load[? &quot;argument1&quot;]);<br />
      }
    </p>
    <p> </p>
  </div>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down1" href="#">iOS (基本例子)</a></p>
  <div class="droptext" data-targetname="drop-down1">
    <p>为<span class="notranslate">iOS</span> 提供的例子与上面给出的<span class="notranslate">Android</span> 的例子相同；只有源文件不同，我们将在本节中介绍。</p>
    <p>iOS<span class="notranslate">extensions</span> 使用了一个 <span class="inline">.h</span> 和一个 <span class="inline">.mm</span> 文件，这两个文件的内容如下（点击可打开）。</p>
    <p class="note"><a data-height="800" data-rhwidget="HyperlinkPopover" data-width="1000" href="Source_Files/GenericTest-iOS.htm">GenericTest<span class="notranslate">iOS</span> 源文件</a></p>
    <p>要把这些文件添加到你的<span class="notranslate">extension</span> ，你首先需要在它的<a href="iOS_Extensions.htm">iOS属性</a>下，输入一个类名（在这个例子中，是 &quot;GenericTest&quot;）。然后你可以使用 &quot;输入框架路径 &quot;选项（如果这些文件存在于你用于构建的<span class="notranslate">macOS</span> 机器上）或 &quot;添加源代码 &quot;选项（如果它们在你的开发机器上）；无论你使用哪种选项，你都需要将它们指向包含你的 <span class="inline">.h</span> 和 <span class="inline">.mm</span> 文件的目录。</p>
    <p>你可以将这些源文件添加到上一节为<span class="notranslate">extension</span> 设置的同一个<span class="notranslate">Android</span> ，这意味着任何已经在该<span class="notranslate">extension</span> 中定义的函数现在也可以在<span class="notranslate">iOS</span> 上工作（鉴于<span class="notranslate">Android</span> 和<span class="notranslate">iOS</span> 上所有函数的<em>外部名称</em>是一样的）。如果你正在创建一个新的<span class="notranslate">extension</span> ，你可以简单地按照前面描述的方式来创建函数。</p>
    <p> </p>
  </div>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down5" href="#">安卓 (回调)</a></p>
  <div class="droptext" data-targetname="drop-down5">
    <p>你可以在你的 <span class="inline">.java</span> <span class="notranslate">extension</span> 文件中使用以下回调函数。</p>
    <p class="code">public void onStart()<br />public void onRestart()<br />public void onStop()<br />public void onDestroy()<br />public void onPause()<br />public void onResume()<br />public void onActivityResult(int requestCode, int resultCode, Intent data)<br />public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults)<br />public void onNewIntent(android.content.Intent newIntent)<br />public void onWindowFocusChanged(boolean hasFocus)<br />public void onConfigurationChanged(Configuration newConfig)<br /></p>
    <p><br /></p>
  </div>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down7" href="#">iOS (回调)</a></p>
  <div class="droptext" data-targetname="drop-down7">
    <p>你可以在你的 <span class="inline">.mm</span> <span class="notranslate">extension</span> 文件中使用以下回调函数。</p>
    <p class="code">-(void) Init<br />
      -(void) onLaunch:(NSDictionary*)launchOptions<br />
      -(void) onResume<br />
      -(void) onPause<br />
      -(void) applicationDidEnterBackground:(UIApplication *)application<br />
      -(void) applicationWillEnterForeground:(UIApplication *)application<br />
      -(void) onStop<br />
      -(void) applicationProtectedDataDidBecomeAvailable:(UIApplication *)application<br />
      -(void) applicationProtectedDataWillBecomeUnavailable:(UIApplication *)application<br />
      -(void) applicationDidReceiveMemoryWarning:(UIApplication *)application<br />
      -(void) applicationSignificantTimeChange:(UIApplication *)application<br />
      -(void) application:(UIApplication *)application willEncodeRestorableStateWithCoder:(NSCoder *)coder<br />
      -(void) application:(UIApplication *)application didDecodeRestorableStateWithCoder:(NSCoder *)coder<br />
      -(void) application:(UIApplication *)application didUpdateUserActivity:(NSUserActivity *)userActivity<br />
      -(void) application:(UIApplication *)application didFailToContinueUserActivityWithType:(NSString *)userActivityType error:(NSError *)error<br />
      -(void) application:(UIApplication *)application handleWatchKitExtensionRequest:(NSDictionary *)userInfo reply:(void (^)(NSDictionary *replyInfo))reply<br />
      -(void) applicationShouldRequestHealthAuthorization:(UIApplication *)application<br />
      -(void) openURL:(NSURL *)url sourceApplication:(NSString *) sourceApplication annotation:(id)annotation<br />
      -(void) application:(UIApplication *)application userDidAcceptCloudKitShareWithMetadata:(CKShareMetadata *)cloudKitShareMetadata</p>
    <p> </p>
  </div>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">返回。<a href="../Extensions.htm"> <span class="notranslate">Extension</span> 编辑</a></div>
        <div style="float:right">下一步。<a href="Creating_An_Extension.htm">创建一个扩展</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span> 2022 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Android Extensions
iOS Extensions
Source
Native
java
mm
h
-->
  <!-- TAGS
source_extensions
-->
</body>
</html>
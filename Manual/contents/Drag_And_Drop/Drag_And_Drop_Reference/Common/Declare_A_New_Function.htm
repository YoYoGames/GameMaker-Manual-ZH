<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>声明一个新函数</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css" />
  <script src="../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Section detailing Declare A New Function" />
  <meta name="rh-index-keywords" content="GML Visual Action - Declare A New Function" />
  <meta name="search-keywords" content="Declare A New Function" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><img> 声明一个新函数</h1>
  <p>这个动作可以用来创建一个新的用户定义的函数，以后可以在你的代码中随时调用。用户定义的函数是指你定义的函数，用于完成内置的<span class="notranslate">GML</span> Visual动作或<span class="notranslate">GML</span> runner函数没有涵盖的任务，其范围可以是全局的、实例的或局部的（关于范围的更多信息，请看<a href="../../../GameMaker_Language/GML_Overview/Variables_And_Variable_Scope.htm">这里</a>）；它们也可以作为<b>构造函数</b>来创建<a href="../../../GameMaker_Language/GML_Overview/Structs.htm">结构</a>。要了解更多关于使用该动作创建全局函数的信息，请参见 "<a href="../../Drag_And_Drop_Overview/Action_Block_Functions.htm">创建动作函数</a>"部分。</p>
  <p>要使用这个动作，你可以把它添加到一个事件或一个脚本中，并给新函数一个名字。然后提供该函数所需的参数，以及任何可选参数的默认值。</p>
  <p>如果该函数要作为一个构造函数（用来创建一个<span class="notranslate">struct</span> ），那么你需要选中<strong>构造函数 </strong>选项，然后使用<a href="New.htm">新建</a>动作从该函数创建一个<span class="notranslate">struct</span> 。你也可以把这个函数<span class="notranslate">flag</span> ，因为它是<b>静态</b>的，这意味着无论这个动作被执行多少次，它都只会被定义一次。最后，如果该函数只在同一事件中本地使用，而不在其他地方使用，那么你可以启用<strong>Temp </strong>选项。</p>
  <p>一旦你定义了名称和参数，你就可以在代码中附加你希望函数被调用时运行的动作，方法是把它们放到动作的旁边，如下图所示。</p>
  <p><img>你可以在下面给出的 &quot;扩展实例 &quot;部分看到将这个动作作为普通函数和构造函数的例子。</p>
  <p> </p>
  <h4>行动语法。</h4>
  <p><img alt="Declare A New Function Icon" class="icon" src="../../../assets/Images/Scripting_Reference/Drag_And_Drop/Reference/Common/i_Common_Declare_Function.png" /></p>
  <h4>争论。</h4>
  <table>
    <tbody>
      <tr>
        <th>争论</th>
        <th>描述</th>
      </tr>
      <tr>
        <td><span class="notranslate">Name</span></td>
        <td>新函数的名称。</td>
      </tr>
      <tr>
        <td><span class="notranslate">Argument [+]</span></td>
        <td>可以传入函数的不同参数，以及它们的默认值（如果可选）。</td>
      </tr>
      <tr>
        <td><span class="notranslate">Constructor</span></td>
        <td>这个函数是否是一个构造函数。</td>
      </tr>
      <tr>
        <td><span class="notranslate">Static</span></td>
        <td>这个函数是否是静态的。</td>
      </tr>
      <tr>
        <td><span class="notranslate">Temp</span></td>
        <td>该函数是否是临时的（意味着它只在当前事件内使用）。</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h1>扩展实例</h1>
  <h4>扩展实例1</h4>
  <p><img>上述动作块将进入一个实例或<span class="notranslate">script</span> 的<b>创建事件</b>中，并声明一个新的函数，名为<span class="inline">set_vec</span> ，有三个参数。 <span class="inline">_x</span>, <span class="inline">_y</span> 和 <span class="inline">spd</span> 。这些参数然后被用于该函数包含的动作中，以设置实例的方向和速度，这在函数被调用时发生。之后你会在任何后续事件中使用<a href="Function_Call.htm">函数调用</a>动作来调用该函数，像这样。</p>
  <p><img>在上图中， <span class="inline">set_vec</span> 函数被调用，它将实例的方向改为指向鼠标的X/Y位置，并将速度设置为5。</p>
  <p> </p>
  <h4 id="h">扩展实例2</h4>
  <p><img>上述动作块将在一个实例或<span class="notranslate">script</span> 的<b>创建事件</b>中进行，并声明了一个新的<strong>构造函数</strong>，名为<span class="inline">init_char_struct</span> ，有四个参数。 <span class="inline">_name</span>, <span class="inline">_location</span>, <span class="inline">_hp</span> 和 <span class="inline">_mana</span> ，最后两个是可选的，默认值为100（这意味着如果在调用函数时没有指定这些参数，它们的默认值将被使用）。然后，这些参数被用来在该函数正在创建的<span class="notranslate">struct</span> 中创建一些变量。</p>
  <p>你以后会使用<a href="New.htm">新建</a>动作调用这个函数来创建一个<span class="notranslate">struct</span> ，像这样。</p>
  <p><img>该函数被调用，并将返回一个新的<span class="notranslate">struct</span> ，它被存储在数组 <span class="inline">char</span> ，<span class="notranslate">struct</span> ，并将填充变量 <span class="inline">name</span> 、 <span class="inline">location</span> 、 <span class="inline">hp</span> 和<span class="inline">mana</span> ，设置为在函数调用中传入相应参数的值。</p>
  <p> </p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">返回。<a href="Common_Actions_Library.htm">共同行动</a></div>
        <div style="float:right">下一步。<a href="Assign_Variable.htm">指派变量</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span> 2022 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Action - Declare A New Function
-->
  <!-- TAGS
action_declare_function
-->
</body>
</html>
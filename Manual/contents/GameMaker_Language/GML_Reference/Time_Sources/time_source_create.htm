<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <title>时间源创建</title>
  <meta name="topic-status" content="Draft" />
  <link rel="stylesheet" type="text/css" href="../../../assets/css/default.css" />
  <script src="../../../assets/scripts/main_script.js"></script>
  <meta name="template" content="../../../assets/masterpages/Manual_Keyword_Page.htt" />
  <meta name="rh-authors" content="Gurpreet S. Matharoo" />
  <meta name="topic-comment" content="Reference page for time_source_create" />
  <meta name="rh-index-keywords" content="time_source_create" />
  <meta name="search-keywords" content="time_source_create" />
</head>
<body>
  <h1>时间源创建</h1>
  <p>该函数创建一个新的<span data-keyref="Type_Resource_TimeSource">时间源</span>。请阅读<a data-xref="{title}" href="Time_Sources.htm">时间源</a>的概述。</p>
  <p>创建一个新的<span data-keyref="Type_Resource_TimeSource">时间源</span>并不能自动启动它；你必须调用 <a href="time_source_start.htm"><span class="inline">time_source_start()</span></a>来激活它。</p>
  <p>一个新的<span data-keyref="Type_Resource_TimeSource">时间源</span>只运行一次，除非指定了<span class="inline2">repetitions</span>参数（见下文）。</p>
  <p>你必须在不再需要<span data-keyref="Type_Resource_TimeSource">时间源时</span>用 <a href="time_source_destroy.htm"><span class="inline">time_source_destroy()</span></a>当你不再需要它时，你必须使用</p>
  <h2>论点</h2>
  <p>下面是该函数的参数明细。</p>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down1" href="#">家长时间来源</a></h3>
  <div class="droptext" data-targetname="drop-down1">
    <p class="dropspot">这是控制新<span data-keyref="Type_Resource_TimeSource">时间源</span>的父<span data-keyref="Type_Resource_TimeSource">时间</span>源。这可能是<span class="inline2">time_source_global</span>、<span class="inline2">time_source_game</span>或一个已经存在的自定义<span data-keyref="Type_Resource_TimeSource">时间源</span>。<br>
      <br>
      参见。<a data-xref="{title}" href="Built_In_Time_Sources.htm">内置的时间源</a>
    </p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down2" href="#">期间</a></h3>
  <div class="droptext" data-targetname="drop-down2">
    <p class="dropspot">这是一个时间段，可以用秒或帧表示，这取决于下一个参数中指定的单位。</p>
    <p class="dropspot">当使用帧作为单位时，周期必须是一个整数。非整数值被向下四舍五入（浮动），但低于1的值被向上四舍五入为1。</p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down3" href="#">单位</a></h3>
  <div class="droptext" data-targetname="drop-down3">
    <p class="dropspot">这是周期表示的单位，可以是<span class="inline2">time_source_units_seconds</span>或<span class="inline2">time_source_units_frames</span>。</p>
    <p class="dropspot">见。<a data-xref="{title}" href="Time_Source_Units.htm">时间来源单位</a></p>
    <p class="dropspot">你可以通过使用 <span class="inline"><a href="time_bpm_to_seconds.htm">time_bpm_to_seconds()</a></span> ，使用每分钟的节拍值。</p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down4" href="#">回调和阿尔格</a></h3>
  <div class="droptext" data-targetname="drop-down4">
    <p class="dropspot">你必须指定一个 &quot;回调&quot; <a href="../../GML_Overview/Method_Variables.htm"><span class="notranslate">method</span></a>当<span data-keyref="Type_Resource_TimeSource">时间源</span>过期时被调用。</p>
    <p class="dropspot">你可以选择指定一个包含参数的数组，这些参数在方法被调用时应该被传入。</p>
    <p class="dropspot">数组本身不会被传递到方法中，而是数组中的每个元素都会作为一个单独的参数被传递。</p>
    <p class="dropspot">例如，如果你的函数期望的参数是<span class="inline2">（x, y,<span class="notranslate">object</span> ）</span>，那么你的<span class="inline2">args</span>数组可能看起来像这样。<span class="inline2">[30, 600, obj_player]</span>。</p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down5" href="#">重复次数</a></h3>
  <div class="droptext" data-targetname="drop-down5">
    <p class="dropspot">你可以选择性地指定你的<span data-keyref="Type_Resource_TimeSource">时间源</span>应该重复多少次。值为<span class="inline2">1</span>意味着它只运行一次，这是默认值。</p>
    <p class="dropspot">你可以指定它应该重复的总次数，或者<span class="inline2">-1</span>来使它无限期地重复。</p>
    <p class="dropspot">例如，如果你把它设置为3，而你的<span data-keyref="Type_Resource_TimeSource">时间源</span>周期是 &quot;4秒&quot;，那么<span data-keyref="Type_Resource_TimeSource">时间源</span>将总共活动12秒，并且每4秒调用一次回调方法。</p>
  </div>
  <h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down6" href="#">过期类型</a></h3>
  <div class="droptext" data-targetname="drop-down6">
    <p class="dropspot">这可能是<span class="inline2">最近的时间来源</span>或<span class="inline2">之后的时间来源</span>。</p>
    <p class="dropspot">见。<a data-xref="{title}" href="Time_Source_Expiry_Types.htm">时间源到期类型</a></p>
  </div>
  <p> </p>
  <h4>语法。</h4>
  <p class="code">time_source_create(parent, period, units, callback, [args, repetitions, expiry_type]);</p>
  <table>
    <colgroup>
      <col />
      <col />
      <col />
    </colgroup>
    <tbody>
      <tr>
        <th>争论</th>
        <th>类型</th>
        <th>描述</th>
      </tr>
      <tr>
        <td><span class="notranslate">parent</span></td>
        <td><span data-keyref="Type_ID_TimeSource"><a href="../../../../GameMaker_Language/GML_Reference/Time_Sources/time_source_create.htm" target="_blank">时间源ID</a></span></td>
        <td><span class="notranslate">The parent <span data-keyref="Type_Resource_TimeSource">Time Source</span> 控制新的<span data-keyref="Type_Resource_TimeSource">时间源</span>的</td>
      </tr>
      <tr>
        <td><span class="notranslate">period</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">真实的</a></span></td>
        <td><span class="notranslate">The period that the <span data-keyref="Type_Resource_TimeSource">Time Source</span> 运行，在给定的单位中</td>
      </tr>
      <tr>
        <td><span class="notranslate">units</span></td>
        <td><span data-keyref="Type_Constant_TimeSource_Unit"><a href="../../../../GameMaker_Language/GML_Reference/Time_Sources/Time_Source_Units.htm" target="_blank">时间来源单位常数</a></span></td>
        <td><span class="notranslate">The units that the given period is in</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">callback</span></td>
        <td><span data-keyref="Type_Method"><a href="../../../../GameMaker_Language/GML_Overview/Method_Variables.htm" target="_blank">方法</a></span>或 <span data-keyref="Type_Function_Script"><a href="../../../../GameMaker_Language/GML_Overview/Script_Functions.htm" target="_blank">脚本功能</a></span></td>
        <td><span class="notranslate">The method or script function to call when the <span data-keyref="Type_Resource_TimeSource">Time Source</span> 过期</td>
      </tr>
      <tr>
        <td><span class="notranslate">args</span></td>
        <td><span data-keyref="Type_Array"><a href="../../../../GameMaker_Language/GML_Overview/Arrays.htm" target="_blank">阵列</a></span></td>
        <td><span class="notranslate"><span class="optional">OPTIONAL</span> 一个包含传入方法的参数的数组。</td>
      </tr>
      <tr>
        <td><span class="notranslate">repetitions</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">真实的</a></span></td>
        <td><span class="notranslate"><span class="optional">OPTIONAL</span> <span data-keyref="Type_Resource_TimeSource">时间源应</span>重复的次数，或-1表示无限期重复。</td>
      </tr>
      <tr>
        <td><span class="notranslate">expiry_type</span></td>
        <td><span data-keyref="Type_Constant_TimeSource_Expiry"><a href="../../../../GameMaker_Language/GML_Reference/Time_Sources/Time_Source_Expiry_Types.htm" target="_blank">时间源到期常数</a></span></td>
        <td><span class="notranslate"><span class="optional">OPTIONAL</span> <span data-keyref="Type_Resource_TimeSource">时间源</span>是在最接近其到期的那一帧到期，还是在下一帧到期</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>返回。</h4>
  <p class="code"><span data-keyref="Type_ID_TimeSource"><a href="../../../../GameMaker_Language/GML_Reference/Time_Sources/time_source_create.htm" target="_blank">Time Source ID</a></span></p>
  <p> </p>
  <h4>例1:</h4>
  <p class="code">var _my_method = function()<br />
    {<br />
        instance_destroy();<br />
    }<br />
    <br />
    var _time_source = time_source_create(time_source_game, 300, time_source_units_frames, _my_method);<br />
    <br />
    time_source_start(_time_source);
  </p>
  <p>在这个例子中，我们希望这个实例在300帧后自我销毁。</p>
  <p>该代码首先创建了一个方法，简单地调用 <a href="../Asset_Management/Instances/instance_destroy.htm"><span class="inline">instance_destroy()</span></a>.</p>
  <p>然后它创建了一个<span data-keyref="Type_Resource_TimeSource">时间源</span>，继承自游戏<span data-keyref="Type_Resource_TimeSource">时间源</span>。它将其周期设置为<strong>300帧</strong>。</p>
  <p>最后，它启动了<span data-keyref="Type_Resource_TimeSource">时间源</span>。</p>
  <p> </p>
  <h4>例2:</h4>
  <p class="code">var _my_method = function()<br />
    {<br />
        show_debug_message(&quot;A second has passed!&quot;);<br />
    }<br />
    <br />
    global.time_per_second = time_source_create(time_source_game, 1, time_source_units_seconds, _my_method, [], -1, time_source_expire_after);<br />
    <br />
    time_source_start(global.time_per_second);
  </p>
  <p>在这个例子中，我们要创建一个全局的<span data-keyref="Type_Resource_TimeSource">时间源</span>，每秒钟过期一次。这段代码将被放置在一个名为 <a href="../../../The_Asset_Editors/Scripts.htm"><span class="notranslate">script</span></a>.</p>
  <p>这段代码首先创建了一个方法，向输出日志打印一条信息，说<strong>&quot;一秒钟过去了！&quot;。</strong></p>
  <p>然后它创建了一个新的<span data-keyref="Type_Resource_TimeSource">时间源</span>，继承自游戏<span data-keyref="Type_Resource_TimeSource">时间源</span>。它将其周期设置为<strong>1秒</strong>。</p>
  <p>该方法被传递到<span data-keyref="Type_Resource_TimeSource">时间源中</span>，这样它就可以在每次过期时被调用。给出一个空数组作为参数。</p>
  <p>重复次数被设置为-1，所以<span data-keyref="Type_Resource_TimeSource">时间源</span>永远不会停止，并一直重复下去。它的过期类型被设置为使回调在其过期后的第一帧运行。</p>
  <p>最后，"<span data-keyref="Type_Resource_TimeSource">时间源</span>"被启动。</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div>返回。<a data-xref="{title}" href="Time_Sources.htm">时间来源</a></div>
        <div>下一页:<a data-xref="{title}" href="time_source_destroy.htm">时间来源的销毁</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span> 2022 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
time_source_create
-->
  <!-- TAGS
time_source_create
-->
</body>
</html>
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>滤波器和效果器功能</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Gurpreet S. Matharoo" />
  <meta name="topic-comment" content="Page outlining the different functions and variables associated with Filter/Effect Layers" />
  <meta name="rh-index-keywords" content="" />
  <meta name="search-keywords" content="Filter and Effect Functions" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>滤波器和效果器功能</h1>
  <h2>概述</h2>
  <p>有各种<span class="notranslate">GML</span> 功能，可用于创建、修改和删除<span class="notranslate">room</span> 内各层的滤镜/效果，让你轻松地实时管理效果，以创建真实的动态滤镜/效果。</p>
  <div data-conref="../../../../../assets/snippets/FX_only_added_through_IDE.hts"> </div>
  <p>后一种方法（在你的代码中指定过滤器/效果）只适用于在函数参数中直接指定的<span class="glossextra">字符串</span> <a class="glossterm" data-glossterm="字面意义上的" href="#">字面</a>，这意味着如果你使用一个变量或任何逻辑来得出过滤器/效果的名称<span class="notranslate">string</span> ，那么<span class="notranslate">asset</span> ，编译器将不会检测到，过滤器/效果将不会被加载。</p>
  <p>请考虑以下例子。</p>
  <p class="code">// This will work on its own<br />
    var _fxshake = fx_create(&quot;_filter_screenshake&quot;);<br />
    <br />
    // This will NOT work on its own<br />
    var _myfilters = { screenshake: &quot;_screenshake&quot; }<br />
    var _filter_to_use = &quot;_filter&quot; + _myfilters.screenshake;<br />
    var _fxshake = fx_create(_filter_to_use);
  </p>
  <p>为了确保后一种方法能够发挥作用，你可以简单地将过滤器添加到你的项目中的至少一个<span class="notranslate">room</span> ，或者确保在你的项目中的任何地方调用 <span class="inline"><a href="fx_create.htm">fx_create()</a></span> ，并将过滤器的名称作为一个<span class="notranslate">string</span> 常量（而不是变量）。</p>
  <h2>功能列表</h2>
  <p>以下函数用于创建和管理包含效果数据的 &quot;FX结构&quot;。</p>
  <ul class="colour">
    <li><a href="fx_create.htm">fx_create</a></li>
    <li><a href="fx_get_parameter.htm">fx_get_parameter</a></li>
    <li><a href="fx_get_parameters.htm">fx_get_parameters</a></li>
    <li><a href="fx_get_name.htm">fx_get_name</a></li>
    <li><a href="fx_get_parameter_names.htm">fx_get_parameter_names</a></li>
    <li><a data-xref="{title}" href="fx_get_single_layer.htm">fx_get_single_layer</a></li>
    <li><a href="fx_set_parameter.htm">fx_set_parameter</a></li>
    <li><a href="fx_set_parameters.htm">fx_set_parameters</a></li>
    <li><a data-xref="{title}" href="fx_set_single_layer.htm">fx_set_single_layer</a></li>
  </ul>
  <p>以下函数用于修改可能包含滤波器/效果的层，通过使用FX结构。</p>
  <ul class="colour">
    <li><a href="layer_set_fx.htm">层_设_计</a></li>
    <li><a href="layer_get_fx.htm">层级_获取_fx</a></li>
    <li><a href="layer_clear_fx.htm">透明度</a></li>
    <li><a data-xref="{title}" href="layer_enable_fx.htm">启用的是 "Layer_enable_fx"。</a></li>
    <li><a data-xref="{title}" href="layer_fx_is_enabled.htm">层_fx_is_enabled</a></li>
  </ul>
  <h2>在运行时修改FX</h2>
  <p>你可以在<span class="notranslate">runtime</span> ，通过以下方式修改过滤器/效果。</p>
  <ul class="colour">
    <li>从您想修改的图层中获取<strong>FX结构</strong>，方法是调用 <span class="inline"><a href="layer_get_fx.htm">layer_get_fx()</a></span>
      <ul>
        <li><em>或者，通过调用 <span class="inline"><a href="fx_create.htm">fx_create()</a></span> ，创建一个新的FX<span class="notranslate">struct</span> ，并使用以下方法将其应用于一个图层 <span class="inline"><a href="layer_set_fx.htm">layer_set_fx()</a></span></em></li>
      </ul>
    </li>
    <li>通过调用以下语句<strong>检索其参数结构</strong> <span class="inline"><a href="fx_get_parameters.htm">fx_get_parameters()</a></span><span class="inline"></span></li>
    <li>通过给<span class="notranslate">struct</span> 变量赋值，根据需要<strong>修改参数</strong>。
      <ul>
        <li><em>从这里获取参数名称。<a data-xref="{title}" href="../../../../../The_Asset_Editors/Room_Properties/FX/All_Filter_Effect_Types.htm">FX类型和参数</a></em></li>
      </ul>
    </li>
    <li><strong>将修改后的结构应用</strong>到FX<span class="notranslate">struct</span> ，调用 <span class="inline"><a href="fx_set_parameters.htm">fx_set_parameters()</a></span>
      <ul>
        <li><em>你不需要在这里调用 <a href="layer_set_fx.htm"><span class="inline">layer_set_fx()</span></a>这里，因为修改FX<span class="notranslate">struct</span> 直接影响到它已经被分配到的层。</em></li>
      </ul>
    </li>
  </ul>
  <p>下面是上面提到的工作流程的示例代码。</p>
  <p class="code_heading">创建活动</p>
  <p class="code">// Store the FX struct, and its parameters struct, in variables<br />
    pixelate_fx = layer_get_fx(&quot;Effect_1&quot;);<br />
    pixelate_fx_params = fx_get_parameters(pixelate_fx);</p>
  <p class="code_heading">阶梯活动</p>
  <p class="code">// Change param as variable<br />
    pixelate_fx_params.g_CellSize = round((mouse_x / room_width) * 64);<br />
    <br />
    // Or, change param as string<br />
    pixelate_fx_params[$ &quot;g_CellSize&quot;] = round((mouse_x / room_width) * 64);<br />
    <br />
    // Apply updated parameters struct to the FX struct<br />
    fx_set_parameters(pixelate_fx, pixelate_fx_params);
  </p>
  <h2>FX<span class="notranslate">Runtime</span> 参数</h2>
  <p><a data-xref="{title}" href="../../../../../The_Asset_Editors/Room_Properties/FX/All_Filter_Effect_Types.htm">FX类型和参数</a>页面列出了所有的滤波器/效果以及它们的<strong>运行时参数</strong>。</p>
  <p>你可以通过以下三种方式使用<span class="notranslate">Runtime</span> 参数名称（以参数<span class="inline2">&quot;g_CellSize &quot;</span>为例）。</p>
  <ul class="colour">
    <li>通过调用<span class="inline"><a href="fx_set_parameter.htm">fx_set_parameter()</a></span> ：<span class="inline2">fx_set_parameter(fx_struct,<strong>&quot;g_CellSize&quot;</strong></span>, 8)修改FX<span class="notranslate">struct</span> 中的一个参数。</li>
    <li>修改参数结构中的一个变量：<span class="inline2">params_struct.<strong>g_CellSize</strong></span>= 8;
     <ul>
        <li><span class="note">注意</span> <em>请确保首先通过调用 <span class="inline"><a href="fx_get_parameters.htm">fx_get_parameters()</a></span> ，获得参数<span class="notranslate">struct</span> 。</em></li>
      </ul>
    </li>
    <li>使用<span class="inline2">$</span>访问器和一个字符串修改参数<span class="notranslate">struct</span> 中的一个变量：<span class="inline2">params_struct[$<strong>&quot;g_CellSize&quot;</strong></span>] = 8。</li>
  </ul>
  <h2>单层模式</h2>
  <p>默认情况下，一个滤镜/效果会应用于它被<a href="layer_set_fx.htm">分配到</a>的图层和该图层下面的所有图层，但是你可以用 <a href="fx_set_single_layer.htm"><span class="inline">fx_set_single_layer()</span></a>来启用滤镜/效果的<strong>单层</strong>模式，以确保它只应用于被分配到的那一层。</p>
  <p>下面的视觉效果显示了一个滤镜被应用于多个图层（这是所有FX图层的默认行为），然后同一滤镜在启用单层模式后被应用于一个非FX图层。</p>
  <div class="image_columns">
    <figure><img alt="Fire Jump man is woozy with the universe" class="center_shadow" src="../../../../../assets/Images/Scripting_Reference/GML/Reference/Rooms/FX_single_layer_off.png" title="Fire Jump man is woozy with the universe" />
      <figcaption>单层模式关闭</figcaption>
    </figure>
    <figure><img alt="Fire Jump man is woozy... alone" class="center_shadow" src="../../../../../assets/Images/Scripting_Reference/GML/Reference/Rooms/FX_single_layer_on.png" style="cursor: nesw-resize;" title="Fire Jump man is woozy... alone" />
      <figcaption>单层模式开启</figcaption>
    </figure>
  </div>
  <p>你也可以在<span class="notranslate">Room</span> 编辑器中通过使用<a href="../../../../../IDE_Tools/The_Inspector.htm">检查器来</a>利用单层效果。</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">返回。<a href="../Rooms.htm">房间</a></div>
        <div style="float:right">下一步。<a href="../General_Layer_Functions/General_Layer_Functions.htm">一般层的功能</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span> 2022 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Filter and Effect Functions
Filter/Effect Layers
-->
  <!-- TAGS
fx_layer_functions
-->
</body>
</html>
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>实例_创建_深度</title>
  <meta name="generator" content="Adobe RoboHelp 2020" />
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css" />
  <script src="../../../../assets/scripts/main_script.js"></script>
  <meta name="rh-authors" content="Mark Alexander" />
  <meta name="topic-comment" content="Page outlining the function instance_create_depth" />
  <meta name="rh-index-keywords" content="instance_create_depth" />
  <meta name="search-keywords" content="instance_create_depth" />
</head>
<body>
  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>实例_创建_深度</h1>
  <p>通过这个函数，你可以在<span class="notranslate">object</span> 内的任何给定点和指定的深度创建一个指定的<span class="notranslate">room</span> 的新实例。深度可以是任何数值，深度越小，画出的东西就越 &quot;靠近 &quot;摄像机，深度越大就越远，所以深度为-200的实例将被画在深度为+300的实例之上（例如）。</p>
  <p>请注意，这个函数实际上将为实例创建一个<span class="notranslate">room</span> ，因为所有的实例都<i>必须</i>在<span class="notranslate">room</span> ，但由于这是一个<i>托管</i>层（即：不是你通过代码或在<span class="notranslate">room</span> ，而是<span data-keyref="GameMaker Name">GameMaker</span>自动创建的）。你不能访问该层，并且 <a href="Instance_Variables/layer.htm"><span class="inline">layer</span></a>实例变量将返回-1。</p>
  <p class="note"><span class="important">重要的</span>是，有一个最小和最大的层深度为-16000到16000。任何放置在这个范围之外的深度的东西都<b>不会被画出来</b>，尽管所有的事件仍将正常运行。</p>
  <p>这个函数返回 <a href="Instance_Variables/id.htm"><span class="inline">id</span></a>，然后可以将其存储在一个变量中并用于访问该实例。注意，<i>在</i>继续执行调用该函数的事件的代码或动作<i>之前</i>，该函数还将调用被创建的实例的<a href="../../../../The_Asset_Editors/Object_Properties/Object_Events.htm">创建事件</a>。</p>
  <h2>可选结构</h2>
  <p>最后一个参数<span class="inline2">var_struct</span>是可选的，需要一个<span class="notranslate">struct</span> ，包含新实例的额外变量。</p>
  <p>来自这个<span class="notranslate">struct</span> 的变量<em>在</em>其创建事件运行<em>之前</em>被应用于新的实例，但<em>在</em>其<a href="../../../../The_Asset_Editors/Object_Properties/Object_Variables.htm">变量定义</a>被设置<em>之后</em>。</p>
  <p>这意味着在新实例的Create事件中可以读取该<span class="notranslate">struct</span> 的值。见底部的<strong>例子2</strong>。</p>
  <p>通过这个<span class="notranslate">struct</span> ，应用于新实例的值可以是任何类型的，包括 <a href="../../../GML_Overview/Method_Variables.htm"><span class="notranslate">method</span></a>变量。<a href="Instance_Variables/Instance_Variables.htm">内置变量</a>也可以被改变。</p>
  <p class="note"><span class="note">注意</span>来自<span class="notranslate">struct</span> 的变量被 &quot;浅层复制 &quot;到新的实例中，这意味着任何数组、<span class="notranslate">structs</span> ，以及其他资源都是通过引用复制的，而不是重复的。</p>
  <p> </p>
  <h4>语法。</h4>
  <p class="code">instance_create_depth(x, y, depth, obj);</p>
  <table>
    <tbody>
      <tr>
        <th>争论</th>
        <th>类型</th>
        <th>描述</th>
      </tr>
      <tr>
        <td><span class="notranslate">x</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">真实的</a></span></td>
        <td><span class="notranslate">The x position the object will be created at</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">y</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">真实的</a></span></td>
        <td><span class="notranslate">The y position the object will be created at</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">depth</span></td>
        <td><span data-keyref="Type_Real"><a href="../../../../../GameMaker_Language/GML_Overview/Data_Types.htm" target="_blank">真实的</a></span></td>
        <td><span class="notranslate">The depth to assign the created instance to</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">obj</span></td>
        <td><span data-keyref="Type_Asset_Object"><a href="../../../../../The_Asset_Editors/Objects.htm" target="_blank">对象资产</a></span></td>
        <td><span class="notranslate">The object index of the object to create an instance of</span></td>
      </tr>
      <tr>
        <td><span class="notranslate">var_struct</span></td>
        <td><span data-keyref="Type_Struct"><a href="../../../../../GameMaker_Language/GML_Overview/Structs.htm" target="_blank">结构</a></span></td>
        <td><span class="notranslate"><span class="optional">OPTIONAL</span> 一个包含变量的结构，用于分配给新实例。</td>
      </tr>
    </tbody>
  </table>
  <p> </p>
  <h4>返回。</h4>
  <p class="code"><span data-keyref="Type_ID_Instance"><a href="../../../../../GameMaker_Language/GML_Reference/Asset_Management/Instances/Instance_Variables/id.htm" target="_blank">Instance ID</a></span></p>
  <p> </p>
  <h4>例1:</h4>
  <p class="code">var inst = instance_create_depth(x, y, -100, obj_Bullet);<br />
    with (inst)<br />
    {<br />
        speed = other.shoot_speed;<br />
        direction = other.image_angle;<br />
    }</p>
  <p>上述代码在<span class="inline2">-100</span>深度创建了一个新的<span class="notranslate">object</span> <span class="inline2">obj_bullet</span>的实例，并将实例ID存储在一个变量中。然后用这个变量将 <span class="inline">speed</span> 和 <span class="inline">direction</span> 分配给新的实例。</p>
  <p>这将首先创建实例，运行其创建事件，<em>然后</em>为其变量赋值。</p>
  <p>如果你想<em>在</em>创建事件运行<em>前</em>分配一些变量，请看下面的例子。</p>
  <p> </p>
  <h4>例2:</h4>
  <p class="code">var inst = instance_create_depth(x, y, -100, obj_bullet,<br />
    {<br />
        speed : shoot_speed,<br />
        direction : image_angle<br />
    });</p>
  <p>上面的代码创建了一个<span class="inline2">obj_bullet</span>的实例，并传入一个<span class="notranslate">struct</span> ，作为最后一个参数。</p>
  <p>该<span class="notranslate">struct</span> ，有速度和方向的变量。它从调用的实例中提取其值，而不需要使用<span class="inline2">其他的</span>。</p>
  <p>这些变量在新实例的创建事件运行之前被应用到新实例上。</p>
  <p>你并不局限于<span class="notranslate">struct</span> ，因为你也可以传入一个存储现有<span class="notranslate">struct</span> 的变量，或者从一个结构中创建一个 <a href="../../../GML_Overview/Language_Features/new.htm"><span class="notranslate">new</span></a>结构，或者从一个 <a href="../../../GML_Overview/Structs.htm#constr"><span class="notranslate">constructor</span></a>.</p>
  <p> </p>
  <p> </p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">返回:<a href="Instances.htm">实例</a></div>
        <div style="float:right">下一步。 <a href="instance_destroy.htm"><span class="notranslate">instance_destroy</span></a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright<span class="notranslate">YoYo Games Ltd.</span> 2022 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
instance_create_depth
-->
  <!-- TAGS
instance_create_depth
-->
</body>
</html>